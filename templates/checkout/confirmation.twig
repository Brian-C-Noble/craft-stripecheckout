{% extends "checkout/_layouts/main" %}

{% set charge = craft.app.session.getFlash('charge') %}
{% set errors = craft.app.session.getFlash('errors') %}

{% block content %}

  <div class="bg-white p-8">
    {% if charge %}
      <div class="border-grey border-dotted border-b">
        <h1 class="text-2xl font-light mb-4">Charge Confirmation</h1>
        <p class="text-sm text-grey-dark leading-normal mb-4">Praesent facilisis placerat libero, non varius mauris tempor sit amet. Ut lobortis sed nisi vitae blandit.</p>
      </div>

      <div class="flex text-sm text-grey-dark border-grey border-dotted border-b">
        <div class="flex-grow py-4">
          ID
        </div>
        <div class="flex-shrink py-4">
          {{ charge.stripeId }}
        </div>
      </div>

      <div class="flex text-sm text-grey-dark border-grey border-dotted border-b">
        <div class="flex-grow py-4">
          Status
        </div>
        <div class="flex-shrink py-4">
          {{ charge.status }}
        </div>
      </div>

      <div class="flex text-sm text-grey-dark border-grey border-dotted border-b">
        <div class="flex-grow py-4">
          Email
        </div>
        <div class="flex-shrink py-4">
          {{ charge.email }}
        </div>
      </div>

      <div class="flex items-center">
        <div class="flex-grow py-4 text-sm text-grey-dark">
          Amount
        </div>
        <div class="flex-shrink py-4 text-lg text-green">
          {{ (charge.amount / 100)|number_format(2, '.', ',') }} {{ charge.currency|upper }}
        </div>
      </div>
    {% elseif errors %}
      <div class="text-sm text-red"><pre>{{ errors|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre></div>
    {% else %}
      <div class="text-sm text-red">Charge data not available.</div>
    {% endif %}
  </div>

  {% if charge %}
    <div class="bg-indigo-lightest p-8 overflow-x-scroll">
      <pre>{{ charge|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre>
    </div>
  {% endif %}

{% endblock %}
